---
original: 23d086a4f1f07c0a16c577381662227e8527ba5ec284d108aa5ccbd851babb11
---

NIP-38
======

用户状态
--------

`草案` `可选`

## 摘要

本NIP（Nostr 改进提案）提供了一种方式，使用户能够分享实时状态，例如他们正在听的音乐，以及他们当前正在做的事情：工作、娱乐、离开办公室等。

## 实时状态

定义了一个特殊的 `kind:30315` "用户状态"事件，它是一个*可选过期*的_参数化可替换事件_，其中 `d` 标签表示状态类型：

例如：

```js
{
  "kind": 30315,
  "content": "Sign up for nostrasia!",
  "tags": [
    ["d", "general"],
    ["r", "https://nostr.world"]
  ],
}

{
  "kind": 30315,
  "content": "Intergalatic - Beastie Boys",
  "tags": [
    ["d", "music"],
    ["r", "spotify:search:Intergalatic%20-%20Beastie%20Boys"],
    ["expiration", "1692845589"]
  ],
}
```

定义了两种常见的状态类型：`general` 和 `music`。`general` 表示一般状态："工作中"、"徒步旅行"等。

`music` 状态事件用于实时流式传输您当前正在听的音乐。`music` 状态的过期时间应该是曲目停止播放的时间。

可以使用任何其他状态类型，但它们不在本NIP定义范围内。

状态可能包含一个 `r`、`p`、`e` 或 `a` 标签，链接到URL、个人资料、笔记或参数化可替换事件。

`content` 可能包含表情符号或 [NIP-30](30.md) 自定义表情符号。如果 `content` 是空字符串，则客户端应清除状态。

# 客户端行为

客户端可以在帖子或个人资料旁边显示此信息，以提供实时用户状态信息。

# 使用场景

* 日历nostr应用程序，当您在会议中时更新您的一般状态
* Nostr Nests（Nostr嵌套），当您加入时更新您的一般状态并提供嵌套链接
* Nostr音乐流媒体服务，当您正在收听时更新您的音乐状态
* 播客应用程序，当您正在收听播客时更新您的音乐状态，并提供链接供他人也可以收听
* 客户端可以使用系统媒体播放器来更新正在播放的音乐状态