---
original: 4d11fc3f1f045fa43eefd80dee361e9c44c1efb060f7ccc4f02f253828664370
---

NIP-10
======


关于文本事件（kind 1）中的"e"和"p"标签
--------------------------------------------

`草案` `可选`

## 摘要
本NIP（网络改进提案）描述了如何在文本事件中使用"e"和"p"标签，特别是那些回复其他文本事件的情况。它帮助客户端将回复组织成以原始事件为根的树状结构。

## 位置相关的"e"标签（已弃用）
>这种方案目前仍在广泛使用；但应被视为已弃用。

`["e", <event-id>, <relay-url>]`  按照NIP-01的规定。

其中：

 * `<event-id>` 是被引用事件的id。
 * `<relay-url>` 是与引用相关的推荐中继的URL。许多客户端将此字段视为可选。

**"e"标签在事件中的位置表示特定的含义，如下所示：**

 * 没有"e"标签：<br>
 此事件不是对任何其他事件的回复，也不引用任何其他事件。

 * 一个"e"标签：<br>
 `["e", <id>]`：此事件回复的事件的id。

 * 两个"e"标签：`["e", <root-id>]`, `["e", <reply-id>]` <br>
 `<root-id>` 是回复链根部事件的id。`<reply-id>` 是此事件回复的文章的id。

 * 多个"e"标签：`["e", <root-id>]` `["e", <mention-id>]`, ..., `["e", <reply-id>]`<br>
可以有任意数量的 `<mention-ids>`。这些是可能在回复链中也可能不在回复链中的事件的id。
它们是从此事件中引用的。`root-id` 和 `reply-id` 如上所述。

>这种方案已被弃用，因为当一个事件引用另一个事件但不是回复时，它会产生难以或无法解决的歧义。

## 标记的"e"标签（推荐）
`["e", <event-id>, <relay-url>, <marker>, <pubkey>]`

其中：

 * `<event-id>` 是被引用事件的id。
 * `<relay-url>` 是与引用相关的推荐中继的URL。客户端应该添加一个有效的 `<relay-URL>` 字段，但也可以将其留空为 `""`。
 * `<marker>` 是可选的，如果存在，则为 `"reply"`、`"root"` 或 `"mention"` 之一。
 * `<pubkey>` 是可选的，应该是被引用事件作者的公钥

标记为 `"reply"` 的表示正在回复的回复事件的id。标记为 `"root"` 的表示正在回复的回复线程的根id。对于顶级回复（直接回复根事件的那些），应只使用 `"root"` 标记。标记为 `"mention"` 的表示被引用或转发的事件id。

直接回复线程根部的回复应该有一个单独的标记为"root"的"e"标签。

>这种方案是首选的，因为它允许事件提及其他事件而不会与 `<reply-id>` 或 `<root-id>` 混淆。

`<pubkey>` 应该是"e"标签事件作者的公钥，这在发件箱模型中用于在作者的写入中继中搜索该事件，当中继提示无法解析事件时。

## "p"标签
在文本事件中使用，包含一个公钥列表，用于记录谁参与了回复线程。

当回复文本事件E时，回复事件的"p"标签应包含E的所有"p"标签以及被回复事件的 `"pubkey"`。

示例：给定一个由 `a1` 创作的文本事件，其"p"标签为 [`p1`, `p2`, `p3`]，那么回复的"p"标签应该是 [`a1`, `p1`, `p2`, `p3`]，顺序不限。