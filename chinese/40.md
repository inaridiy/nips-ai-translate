---
original: dc36f24ad46f20a143e0ba63d321f4b3f956c6d4307a644398340bc1a24cdf19
---

NIP-40
======

过期时间戳
----------

`草案` `可选`

`expiration`（过期）标签使用户能够指定一个 Unix 时间戳，在该时间戳时，消息应被视为过期（由中继和客户端），并且应被中继删除。

#### 规范

```
tag: expiration
values:
 - [UNIX timestamp in seconds]: required
```

#### 示例

```json
{
  "pubkey": "<pub-key>",
  "created_at": 1000000000,
  "kind": 1,
  "tags": [
    ["expiration", "1600000000"]
  ],
  "content": "This message will expire at the specified timestamp and be deleted by relays.\n",
  "id": "<event-id>"
}
```

注意：时间戳应与 created_at 时间戳格式相同，并应被解释为中继应删除消息的时间。

客户端行为
----------

客户端应使用 `supported_nips` 字段来了解中继是否支持此 NIP。客户端不应向不支持此 NIP 的中继发送过期事件。

客户端应忽略已过期的事件。

中继行为
--------

中继可能不会在过期时立即删除过期消息，并可能无限期地保留它们。
中继不应向客户端发送过期事件，即使这些事件已存储。
如果发布给中继的事件已过期，中继应丢弃这些事件。
过期时间戳不影响临时事件的存储。

建议用例
--------

* 临时公告 - 此标签可用于发布临时公告。例如，活动组织者可以使用此标签发布有关即将举行的活动的公告。
* 限时优惠 - 企业可以使用此标签发布在一定时间后过期的限时优惠。例如，企业可以使用此标签发布仅在有限时间内有效的特别优惠。

#### 警告
由于事件在中继上始终可公开访问，因此可能会被第三方下载。
所以不要将过期消息视为对话或其他用途的安全功能。