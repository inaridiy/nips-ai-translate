---
original: cd0688c042766df066e8072483c83fbd139f2799db95887d2dd6372cd62927c4
---

NIP-28
======

公開チャット
-----------

`ドラフト` `オプション`

このNIPは、公開チャットチャンネル、チャンネルメッセージ、および基本的なクライアントサイドのモデレーションのための新しいイベントの種類を定義します。

以下の5つのイベントの種類（40-44）を即時使用のために予約します：

- `40 - チャンネル作成`
- `41 - チャンネルメタデータ`
- `42 - チャンネルメッセージ`
- `43 - メッセージを非表示`
- `44 - ユーザーをミュート`

クライアント中心のモデレーションにより、クライアント開発者はアプリに含めたいコンテンツの種類を自由に決定できる一方、リレーに追加の要件を課すことはありません。

## 種類 40: チャンネル作成

公開チャットチャンネルを作成します。

チャンネル作成の`content`フィールドには、クライアントは基本的なチャンネルメタデータ（種類41で指定される`name`、`about`、`picture`、`relays`）を含めるべきです（SHOULD）。

```json
{
  "content": "{\"name\": \"デモチャンネル\", \"about\": \"テストチャンネルです。\", \"picture\": \"https://placekitten.com/200/200\", \"relays\": [\"wss://nos.lol\", \"wss://nostr.mom\"]}",
  ...
}
```


## 種類 41: チャンネルメタデータの設定

チャンネルの公開メタデータを更新します。

種類41は、チャンネルのイベントIDを変更せずにメタデータを更新するために使用されます。`e`タグ値ごとに最新の種類41のみが利用可能である場合があります（MAY）。

クライアントは、種類40の公開鍵以外からの種類41を無視すべきです（SHOULD）。

クライアントは以下の基本的なメタデータフィールドをサポートすべきです（SHOULD）：

- `name` - 文字列 - チャンネル名
- `about` - 文字列 - チャンネルの説明
- `picture` - 文字列 - チャンネル画像のURL
- `relays` - 配列 - イベントのダウンロードとブロードキャスト先のリレーのリスト

クライアントは追加のメタデータフィールドを追加してもかまいません（MAY）。

クライアントは[NIP-10](10.md)でマークされた"e"タグを使用して、リレーを推奨すべきです（SHOULD）。

```json
{
  "content": "{\"name\": \"更新されたデモチャンネル\", \"about\": \"テストチャンネルを更新しています。\", \"picture\": \"https://placekitten.com/201/201\", \"relays\": [\"wss://nos.lol\", \"wss://nostr.mom\"]}",
  "tags": [["e", <channel_create_event_id>, <relay-url>]],
  ...
}
```


## 種類 42: チャンネルメッセージの作成

チャンネルにテキストメッセージを送信します。

クライアントは[NIP-10](10.md)でマークされた"e"タグを使用して、リレーを推奨し、返信またはルートメッセージであるかを指定すべきです（SHOULD）。

クライアントは返信に[NIP-10](10.md)の"p"タグを追加すべきです（SHOULD）。

ルートメッセージ：

```json
{
  "content": <string>,
  "tags": [["e", <kind_40_event_id>, <relay-url>, "root"]],
  ...
}
```

別のメッセージへの返信：

```json
{
  "content": <string>,
  "tags": [
      ["e", <kind_40_event_id>, <relay-url>, "root"],
      ["e", <kind_42_event_id>, <relay-url>, "reply"],
      ["p", <pubkey>, <relay-url>],
      ...
  ],
  ...
}
```


## 種類 43: メッセージを非表示

ユーザーが特定のメッセージを表示したくない場合。

`content`には、オプションで`reason`などのメタデータを含めることができます。

クライアントは、ユーザーからのイベント43がイベント42の`id`と一致する場合、そのユーザーに表示されるイベント42を非表示にすべきです（SHOULD）。

クライアントは、イベント43を送信したユーザー以外のユーザーに対してもイベント42を非表示にしてもかまいません（MAY）。

（例えば、3人のユーザーが「ポルノグラフィー」という単語を含む理由でイベントを「非表示」にした場合、iOSアプリであるNostrクライアントは、すべてのiOSクライアントに対してそのメッセージを非表示にすることを選択できます。）

```json
{
  "content": "{\"reason\": \"不適切な画像\"}",
  "tags": [["e", <kind_42_event_id>]],
  ...
}
```

## 種類 44: ユーザーをミュート

ユーザーが別のユーザーからのメッセージを表示したくない場合。

`content`には、オプションで`reason`などのメタデータを含めることができます。

クライアントは、ユーザーからのイベント44がイベント42の`pubkey`と一致する場合、そのユーザーに表示されるイベント42を非表示にすべきです（SHOULD）。

クライアントは、イベント44を送信したユーザー以外のユーザーに対してもイベント42を非表示にしてもかまいません（MAY）。

```json
{
  "content": "{\"reason\": \"不適切な画像を投稿\"}",
  "tags": [["p", <pubkey>]],
  ...
}
```

## リレーの推奨

クライアントはメタデータイベントのリレーURLを使用すべきです（SHOULD）。

クライアントは任意のリレーURLを使用してもかまいません（MAY）。例えば、チャンネルの元の種類40イベントをホストしているリレーがオフラインになった場合、クライアントはバックアップリレーや、元のリレーよりも信頼できるリレーからチャンネルデータを取得することができます。

動機
----------
ソーシャルメディアの検閲耐性のあるコミュニケーションを解決するのであれば、Telegramスタイルのメッセージングについても同様に解決する必要があります。

私たちは、囲い込まれた庭園から、すべての人に開かれた真の公共広場へと、グローバルな会話を持ち出すことができます。


追加情報
---------------

- [fiatjaf+jb55のコメント付きチャットデモPR](https://github.com/ArcadeCity/arcade/pull/28)
- [NIP16に関する会話](https://t.me/nostr_protocol/29566)