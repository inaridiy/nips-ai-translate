---
original: 0b5245073d658eee3f77539b5b10d3a429a8008413746232239208d3d00f5f2e
---

NIP-19
======

bech32エンコードされたエンティティ
-----------------------

`draft` `optional`

このNIPは、クライアントでキー、ID、その他の情報を表示するために使用できるbech32形式の文字列を標準化します。これらの形式はコアプロトコルのどこでも使用されることを意図していません。ユーザーへの表示、コピー＆ペースト、共有、QRコードのレンダリング、データ入力のみを目的としています。

IDとキーは16進数またはバイナリ形式で保存することをお勧めします。これらの形式は、コアプロトコルで実際に使用する必要があるものに近いためです。

## 単独のキーとID

32バイトの文字列である秘密鍵、公開鍵、イベントIDの間の混乱と混合を防ぐために、各エンティティに異なるプレフィックスを持つbech32（mではない）エンコーディングを使用できます。

以下が可能なbech32プレフィックスです：

  - `npub`: 公開鍵
  - `nsec`: 秘密鍵
  - `note`: ノートID

例：16進数の公開鍵 `3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d` は `npub180cvv07tjdrrgpa0j7j7tmnyl2yr6yr7l8j4s3evf6u64th6gkwsyjh6w6` に変換されます。

キーとIDのbech32エンコーディングは、標準のNIP-01イベント形式やフィルター内で使用されることを意図していません。より人間にやさしい表示と入力のみを目的としています。クライアントは当面、16進数とnpub形式の両方でキーを受け入れ、内部で変換する必要があります。

## 追加のメタデータを含む共有可能な識別子

プロフィールやイベントを共有する際、アプリは他のアプリがこれらのエンティティをより簡単に見つけて表示できるように、リレー情報やその他のメタデータを含めることを決定する場合があります。

これらのイベントの内容は、`TLV`（type-length-value）のバイナリエンコードされたリストです。`T`と`L`はそれぞれ1バイト（`uint8`、つまり0-255の範囲の数値）で、`V`は`L`で示されたサイズのバイト列です。

`TLV`を含む可能なbech32プレフィックスは以下の通りです：

  - `nprofile`: nostrプロフィール
  - `nevent`: nostrイベント
  - `naddr`: nostr _置換可能イベント_ 座標
  - `nrelay`: nostrリレー（非推奨）

以下が標準化された可能な`TLV`タイプです：

- `0`: `special`
  - bech32プレフィックスに依存します：
    - `nprofile`の場合、プロフィールの公開鍵の32バイト
    - `nevent`の場合、イベントIDの32バイト
    - `naddr`の場合、参照されているイベントの識別子（`"d"`タグ）。パラメータ化されていない置換可能イベントの場合は空の文字列を使用します。
- `1`: `relay`
  - `nprofile`、`nevent`、`naddr`の場合、_オプションで_、エンティティ（プロフィールまたはイベント）が見つかる可能性が高いリレーをASCIIでエンコードしたもの
  - これは複数回含めることができます
- `2`: `author`
  - `naddr`の場合、イベントの公開鍵の32バイト
  - `nevent`の場合、_オプションで_、イベントの公開鍵の32バイト
- `3`: `kind`
  - `naddr`の場合、kindの32ビット符号なし整数（ビッグエンディアン）
  - `nevent`の場合、_オプションで_、kindの32ビット符号なし整数（ビッグエンディアン）

## 例

- `npub10elfcs4fr0l0r8af98jlmgdh9c8tcxjvz9qkw038js35mp4dma8qzvjptg` は公開鍵の16進数 `7e7e9c42a91bfef19fa929e5fda1b72e0ebc1a4c1141673e2794234d86addf4e` にデコードされ、その逆も同様です
- `nsec1vl029mgpspedva04g90vltkh6fvh240zqtv9k0t9af8935ke9laqsnlfe5` は秘密鍵の16進数 `67dea2ed018072d675f5415ecfaed7d2597555e202d85b3d65ea4e58d2d92ffa` にデコードされ、その逆も同様です
- `nprofile1qqsrhuxx8l9ex335q7he0f09aej04zpazpl0ne2cgukyawd24mayt8gpp4mhxue69uhhytnc9e3k7mgpz4mhxue69uhkg6nzv9ejuumpv34kytnrdaksjlyr9p` は以下のTLV項目を持つプロフィールにデコードされます：
  - pubkey: `3bf0c63fcb93463407af97a5e5ee64fa883d107ef9e558472c4eb9aaaefa459d`
  - relay: `wss://r.x.com`
  - relay: `wss://djbas.sadkb.com`

## 注意事項

- `npub`キーはNIP-01イベントやNIP-05 JSONレスポンスで使用してはいけません。そこでは16進数形式のみがサポートされています。
- bech32形式の文字列をデコードする際、認識されないまたはサポートされていないTLVはエラーを引き起こすのではなく、無視されるべきです。