---
original: 0197c51a10e973db8983eb69375630b4a55b34fa74bcf484945cae32abc545cb
---

NIP-65
======

リレーリストメタデータ
-------------------

`draft` `optional`

`kind:10002`を使用して置換可能なイベントを定義し、ユーザーのコンテンツを発見し、他のユーザーから新しいコンテンツを受信するための優先リレーを広告します。

イベントには、リレーURIと`read`または`write`マーカーを含む`r`タグのリストが含まれている必要があります。`read` / `write`とマークされたリレーは、それぞれREAD / WRITEリレーと呼ばれます。マーカーが省略された場合、リレーは両方の目的に使用されます。

`.content`は使用されません。

```json
{
  "kind": 10002,
  "tags": [
    ["r", "wss://alicerelay.example.com"],
    ["r", "wss://brando-relay.com"],
    ["r", "wss://expensive-relay.example2.com", "write"],
    ["r", "wss://nostr-relay.example.com", "read"]
  ],
  "content": "",
  ...other fields
}
```

このNIPは、クライアントのリレー使用を設定するために設計されたリレーリスト（`kind:3`スタイルのリレーリストなど）を完全に置き換えるものではありません。クライアントは、`kind:10002`リレーリストが見つからない状況で他のリレーリストを使用することがあります。

## ReadリレーとWriteリレーを使用するタイミング

ユーザー**から**イベントを探す場合、クライアントはユーザーの`kind:10002`のWRITEリレーを使用する必要があります。

ユーザー**について**のイベント（ユーザーがタグ付けされたイベント）を探す場合、クライアントはユーザーの`kind:10002`のREADリレーを使用する必要があります。

イベントをブロードキャストする場合、クライアントは以下を行う必要があります：

- 作成者のWRITEリレーにイベントをブロードキャストする
- タグ付けされた各ユーザーのすべてのREADリレーにイベントをブロードキャストする

## 動機

ユーザーごとに固定されたリレーリストを使用する古いモデルは、大規模なリレー運営者に集中化をもたらします：

  - ほとんどのユーザーは、より広い範囲の視聴者の中で大きな可視性を得ることを目指して、同じ人気の高いリレーに投稿を送信しています
  - 多くのユーザーが、重複を犠牲にしてより多くのデータを取得するために、多数のリレーからイベントを取得しています
  - イベントは、多くの場合、多くの異なるリレーにコピーされています

このNIPにより、クライアントは各個別ユーザーから最新のリレーセットに直接接続できるようになり、人気のあるリレーにイベントをブロードキャストする必要がなくなります。

## 最終的な考慮事項

1. クライアントは、ユーザーに`kind:10002`リストを小さく（2-4リレー）保つよう指導する必要があります。

2. クライアントは、作成者の`kind:10002`イベントを可能な限り多くのリレーに広めるべきです。

3. `kind:10002`イベントは主に、ユーザーの優先リレーを他のユーザーに広告するために使用されるべきです。ユーザー自身のクライアントは、データの取得に使用するリレーの選択に他のヒューリスティックを使用する場合があります。

4. DMは、最大限のプライバシーを保つために、作成者のWRITEリレーと受信者のREADリレーにのみブロードキャストされるべきです。

5. リレーが[NIP-11](11.md)ドキュメントでこのNIPのサポートを示している場合、それは支払い顧客やホワイトリストグループだけでなく、幅広いユーザーからkind 10002イベントを受け入れる意思があることを意味します。

6. クライアントは、[RFC 3986](https://datatracker.ietf.org/doc/html/rfc3986#section-6)に従ってリレーURIを正規化することで、接続を重複排除する必要があります。